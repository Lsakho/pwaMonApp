<ion-content>
  <div class="header">
    <ion-searchbar (ionChange)="filterByTitle($event)"></ion-searchbar>


    <!-- <ion-toolbar> -->
    <ion-segment class="button" value="activities" (ionChange)="toggleActivities($event)">
      <ion-segment-button fill="clear" option value="Toutes"
        (click)="selectedActivity$.next('Toutes')">Toutes</ion-segment-button>
      <ion-segment-button fill="clear" option value="palce de jeux"
        (click)="selectedActivity$.next('place de jeux')">Espace enfant <svg xmlns="http://www.w3.org/2000/svg"
          width="24" height="24" viewBox="0 0 512 512">
          <path fill="currentColor"
            d="M327.467 19.992c.748 14.94 2.317 51.268 2.59 98.76c3.474-.286 6.557-.381 9.72 1.08c18.04 8.345 27.243 29.326 27.026 50.506c-.217 21.18-11.283 44.136-36.104 54.307a41.62 41.62 0 0 1-2.486.923c-3.408 80.504-12.307 166.37-33.754 225.5c-6.876 15.831-17.029 29.217-26.828 40.94l55.27.422c20.676-12.19 32.041-27.395 36.32-46.407l17.558 3.954c-3.67 16.312-11.99 30.662-24.511 42.677l143.052 1.094c-5.13-14.524-16.16-46.501-20.357-70.217C451.89 293.171 450.15 45 450.025 19.992zM18.279 38.984l.881 18.725c17.856 12.047 32.035 23.91 45.969 35.527c12.887-11.156 2.404-29.725-5.82-39.091c-13.668-5.346-27.335-10.467-41.03-15.16zM86.723 65.13c4.77 14.56 3.347 29.656-7.477 39.746c24.105 19.479 50.832 38.151 97.1 55.635c13.836-22.588 12.08-43.852-3.338-60.739c-29.03-10.9-57.703-22.997-86.285-34.642zm-31.721 42.988V400h17.996V122.723c-6.187-4.856-12.114-9.73-17.996-14.606zm145.264 1.434c3.253 8.283 4.54 16.754 3.982 25.043c-.765 11.35-4.673 22.135-10.545 32.095c16.926 5.691 36.192 11.248 58.451 16.655l2.604.633l1.834 1.953c9.223 9.826 22.535 17.206 35.469 21.006c12.933 3.8 25.473 3.655 31.814 1.056c18.024-7.385 24.773-22.363 24.932-37.84c.152-14.822-7.069-28.554-15.479-33.306c-45.88-1.699-89.948-12.607-133.062-27.295zm-33.264 66.476V400h17.996V182.605a502.784 502.784 0 0 1-17.996-6.578zM32 419.002v17.996h176v-17.996z" />
        </svg>
      </ion-segment-button>
      <ion-segment-button fill="clear" option value="pataugeoire"
        (click)="selectedActivity$.next('pataugeoire')">Pataugeoire <svg xmlns="http://www.w3.org/2000/svg" width="24"
          height="24" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M22 21c-1.11 0-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36c-.56 0-.78.13-1.15.36c-.46.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36c-.56 0-.78.13-1.15.36c-.46.27-1.08.64-2.19.64s-1.73-.37-2.18-.64c-.37-.23-.6-.36-1.15-.36s-.78.13-1.15.36c-.46.27-1.08.64-2.19.64v-2c.56 0 .78-.13 1.15-.36c.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36c.56 0 .78-.13 1.15-.36c.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36v2zm0-4.5c-1.11 0-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36c-.56 0-.78.13-1.15.36c-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36c-.56 0-.78.13-1.15.36c-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36s-.78.13-1.15.36c-.47.27-1.09.64-2.2.64v-2c.56 0 .78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36c.56 0 .78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36v2H22zM8.67 12c.56 0 .78-.13 1.15-.36c.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.12-.07.26-.15.41-.23L10.48 5C8.93 3.45 7.5 2.99 5 3v2.5c1.82-.01 2.89.39 4 1.5l1 1l-3.25 3.25c.31.12.56.27.77.39c.37.23.59.36 1.15.36z"
            opacity=".3" />
          <circle cx="16.5" cy="5.5" r="2.5" fill="currentColor" opacity=".3" />
          <path fill="currentColor"
            d="M22 16.5h-.02h.02zM10 8l-3.25 3.25c.31.12.56.27.77.39c.37.23.59.36 1.15.36s.78-.13 1.15-.36c.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36c.55 0 .78-.13 1.15-.36c.12-.07.26-.15.41-.23L10.48 5C8.93 3.45 7.5 2.99 5 3v2.5c1.82-.01 2.89.39 4 1.5l1 1zm-4.65 7.5c.55 0 .78.14 1.15.36c.45.27 1.07.64 2.18.64s1.73-.37 2.18-.64c.37-.23.59-.36 1.15-.36c.55 0 .78.14 1.15.36c.45.27 1.07.64 2.18.64s1.73-.37 2.18-.64c.37-.23.59-.36 1.15-.36c.55 0 .78.14 1.15.36c.45.27 1.06.63 2.16.64v-2c-.55 0-.78-.14-1.15-.36c-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.18.64c-.37.23-.6.36-1.15.36s-.78-.14-1.15-.36c-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.18.64c-.37.23-.59.36-1.15.36c-.55 0-.78-.14-1.15-.36c-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.18.64c-.37.23-.59.36-1.15.36v2c1.11 0 1.73-.37 2.2-.64c.37-.23.6-.36 1.15-.36zM18.67 18c-1.11 0-1.73.37-2.18.64c-.37.23-.6.36-1.15.36c-.55 0-.78-.14-1.15-.36c-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.19.64c-.37.23-.59.36-1.15.36s-.78-.13-1.15-.36c-.45-.27-1.07-.64-2.18-.64s-1.73.37-2.19.64c-.37.23-.59.36-1.15.36v2c1.11 0 1.73-.37 2.19-.64c.37-.23.6-.36 1.15-.36c.55 0 .78.13 1.15.36c.45.27 1.07.64 2.18.64s1.73-.37 2.19-.64c.37-.23.59-.36 1.15-.36c.55 0 .78.14 1.15.36c.45.27 1.07.64 2.18.64s1.72-.37 2.18-.64c.37-.23.59-.36 1.15-.36c.55 0 .78.14 1.15.36c.45.27 1.07.64 2.18.64v-2c-.56 0-.78-.13-1.15-.36c-.45-.27-1.07-.64-2.18-.64z" />
          <circle cx="16.5" cy="5.5" r="2.5" fill="currentColor" />
        </svg>
      </ion-segment-button>
      <ion-segment-button fill="clear" option value="skatepark" (click)="selectedActivity$.next('skatepark')">Skatepark
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
          <mask id="ipSSkate0">
            <g fill="none">
              <path fill="#fff" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="2"
                stroke-width="4" d="M44 39.82H4l32.54-18H44v18Z" />
              <path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="2" stroke-width="4"
                d="M3.857 19.201L7.09 20.8l17.321-10l.232-3.598" />
              <path fill="#fff" d="M12.33 24.88a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm11.12-6a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z" />
            </g>
          </mask>
          <path fill="currentColor" d="M0 0h48v48H0z" mask="url(#ipSSkate0)" />
        </svg>

      </ion-segment-button>
    </ion-segment>

    <ion-segment class="button" *ngIf="showMore" value="activities-2" (ionChange)="toggleActivities($event)">
      <ion-segment-button fill="clear" option value="espace de liberter pour chien"
        (click)="selectedActivity$.next('espace de liberter pour chien')">Espace chien <svg
          xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M21 6h-2l-1.27-1.27A2.49 2.49 0 0 0 16 4h-2.5A2.64 2.64 0 0 0 11 2v6.36a4.38 4.38 0 0 0 1.13 2.72a6.57 6.57 0 0 0 4.13 1.82l3.45-1.38a3 3 0 0 0 1.73-1.84L22 8.15a1.06 1.06 0 0 0 0-.31V7a1 1 0 0 0-1-1zm-5 2a1 1 0 1 1 1-1a1 1 0 0 1-1 1z" />
          <path fill="currentColor"
            d="M11.38 11.74A5.24 5.24 0 0 1 10.07 9H6a1.88 1.88 0 0 1-2-2a1 1 0 0 0-2 0a4.69 4.69 0 0 0 .48 2A3.58 3.58 0 0 0 4 10.53V22h3v-5h6v5h3v-8.13a7.35 7.35 0 0 1-4.62-2.13z" />
        </svg>

      </ion-segment-button>
      <ion-segment-button fill="clear" option value="terrain de petanque"
        (click)="selectedActivity$.next('terrain de petanque')">PÃ©tanque</ion-segment-button>

      <ion-segment-button fill="clear" option value="sport" (click)="selectedActivity$.next('sport')">Sport <svg
          xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M20.57 14.86L22 13.43L20.57 12L17 15.57L8.43 7L12 3.43L10.57 2L9.14 3.43L7.71 2L5.57 4.14L4.14 2.71L2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57L3.43 12L7 8.43L15.57 17L12 20.57L13.43 22l1.43-1.43L16.29 22l2.14-2.14l1.43 1.43l1.43-1.43l-1.43-1.43L22 16.29l-1.43-1.43Z" />
        </svg>

      </ion-segment-button>
      <ion-segment-button fill="clear" option value="table de pique-nique"
        (click)="selectedActivity$.next('table de pique-nique')">Table de pique-nique <svg
          xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">
          <path fill="currentColor"
            d="M4 3c-.554 0-1 .446-1 1s.446 1 1 1h1.297l-.645 2H2.5c-.554 0-1 .446-1 1s.446 1 1 1h1.51l-.969 3.01a.75.75 0 1 0 1.426.465l.002-.004L5.586 9h3.828l1.117 3.47a.75.75 0 1 0 1.428-.46L10.99 9h1.51c.554 0 1-.446 1-1s-.446-1-1-1h-2.152l-.645-2H11c.554 0 1-.446 1-1s-.446-1-1-1H4zm2.873 2h1.254l.644 2H6.23l.644-2z" />
        </svg>

      </ion-segment-button>
    </ion-segment>

    <ion-button fill="clear" (click)="showMoreActivities()">Voir plus</ion-button>
  </div>
  <div id="mapelement" *ngIf="displayMap">

    <div *ngIf="(layers$|async) as layerReady" style="height: 100vh; width: auto;" leaflet [leafletOptions]="options"
      (leafletClick)="searchMarker($event)">

      <div *ngFor="let l of layerReady" [leafletLayer]="l"></div>
    </div>
  </div>

</ion-content>